<header class="navbar-fixed-top" style="top:40px;">
  <div class="navbar-inner" style="background-color:#aef;background-image:none;-webkit-box-shadow:none;border:none;padding:1px">
      <%= form_tag(new_schedule_path, class: "form-inline", :style => "display:inline", method: :get) do %>
	<button class="btn btn-success btn-large" name="go" type="submit">
  	<i class="icon-play icon-white"></i>
	</button>
	<div class="input-append">
<%= text_field_tag :name, "", data: {autocomplete_source: autocomplete_projects_path}, placeholder: "Project", class: "autocomplete", :style => "display:inline;margin:0;padding:11px;" %>
  <span class="add-on" id="hours" style="padding:11px;"><%= (Project.total_time/3600).round(2) %></span>
  </div>
<% end %>
  </div>
</header>

<div style="position:relative;left:0;right:0;top:39px;bottom:0px;overflow:auto">
<table>
<% Project.all.sort_by(&:name).each do |project| %>
	<% if project.featured %>
	<tr>
		
		<td style="text-align:center;vertical-align:center">
		<%= form_tag(new_schedule_path, class: "form-inline", :style => "display:inline", method: :get) do %>
			<%= hidden_field_tag :name, project.name  %>
			<% if project.active? %>
				<button class="btn btn-danger btn-large" id="running" name="stop" type="submit">
					<i class="icon-pause icon-white"></i>
				</button>
			<% else %>
				<button class="btn btn-success btn-large" name="go" type="submit">
					<i class="icon-play icon-white"></i>
				</button>
			<% end %>	
		</td>
		<td>
			<button class="btn btn-danger btn-large" name="del" type="submit">
					<i class="icon-remove icon-white"></i>
			</button>
		</td>
		<td style="text-align:left"><%= link_to project.name, project_path(project) %></td>
	</tr>
	<% end %>
	<% end %>
<% end %>
</table>
</div>
<script>
$(function() {
	 $( ".autocomplete" ).autocomplete({
			source: $( "#name" ).data('autocomplete-source')
	});
});
</script>
<script>
	if ($("#running").length > 0) {
  	var i = parseFloat('<%= Project.total_time %>');
  	var timer = setInterval(function() { $('#hours').text( Math.round(i++/36)/100 ) }, 1000)
  }
</script>

