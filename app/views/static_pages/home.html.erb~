<header class="navbar navbar-fixed-top">
  <div class="navbar-inner">
      <%= link_to "Time Saver", root_path, id: "logo" %>
      <nav>
        <ul class="nav pull-right">
          <li><%= link_to "Edit Schedule", schedules_path %></li>
          <li><%= link_to "Calendar", calendar_schedules_path %></li>
          <li><%= link_to "Time Spent", projects_path %></li>
        </ul>
      </nav>
  </div>
</header>
<div style="position:absolute;left:0;right:0;top:40px;height:46px;padding-top:2px;">
<%= form_tag(new_schedule_path, class: "form-inline", :style => "display:inline", method: :get) do %>
  <button style="margin-left:1px" class="btn btn-success btn-large" name="go" type="submit">
  	<i class="icon-play icon-white"></i>
	</button>
<%= text_field_tag :name, "", data: {autocomplete_source: autocomplete_projects_path}, placeholder: "Project", class: "autocomplete", :style => "display:inline;margin:0;padding:11px 19px;font-size:25px;" %>
<% end %>
<span style="font-size:25px"><span id="hours"><%= Project.total_time %></span> hours</span>
</div>
<div style="position:absolute;left:0;right:0;top:88px;bottom:0px;overflow:auto">
<table>
<% Project.all.sort_by(&:name).each do |project| %>
	<% if project.featured %>
	<tr>
		
		<td style="text-align:center;vertical-align:center">
		<%= form_tag(new_schedule_path, class: "form-inline", :style => "display:inline", method: :get) do %>
			<%= hidden_field_tag :name, project.name  %>
			<% if project.active? %>
				<button class="btn btn-danger btn-large" id="running" name="stop" type="submit">
					<i class="icon-pause icon-white"></i>
				</button>
			<% else %>
				<button class="btn btn-success btn-large" name="go" type="submit">
					<i class="icon-play icon-white"></i>
				</button>
			<% end %>	
		</td>
		<td>
			<button class="btn btn-danger btn-large" name="del" type="submit">
					<i class="icon-remove icon-white"></i>
			</button>
		</td>
		<td style="text-align:left"><%= link_to project.name, project_path(project) %></td>
	</tr>
	<% end %>
	<% end %>
<% end %>
</table>
</div>
<script>
$(function() {
	 $( ".autocomplete" ).autocomplete({
			source: $( "#name" ).data('autocomplete-source')
	});
});
</script>
<script>
	if ($("#running").length > 0) {
  	var i = parseFloat('<%= Project.total_time %>');
  	var timer = setInterval(function() { $('#hours').text( Math.round(i++/36)/100 ) }, 1000)
  }
</script>

