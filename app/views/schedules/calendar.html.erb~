<h1>Calendar</h1>
<p><%= link_to "Home", root_path %> | <%= link_to "Edit Schedule", schedules_path %> | <%= link_to "View Time Spent", projects_path %></p>
<div id='calendar' style="width: 600px"></div>
<%= link_to "Home", root_path %> | <%= link_to "Edit Schedule", schedules_path %> | <%= link_to "View Time Spent", projects_path %>
<script>
$(function() {
	$('#calendar').fullCalendar({
        height: 600,
        theme: false,
        firstHour: 8,
        defaultView: 'agendaWeek',
        header: {
					left: 'prev,next today',
					center: 'title',
					right: 'month,agendaWeek,agendaDay'
				},
				editable: true,
				events: [
				<% Schedule.all.sort_by(&:id).each do |event| %>
				{
					title: '<%= event.project.name %>',
					start: new Date(<%= event.start_at.year %>, <%= event.start_at.month-1 %>, <%= event.start_at.day %>, <%= event.start_at.hour %>, <%= event.start_at.min %>, <%= event.start_at.sec %>),
					<% if event.end_at %>
						end: new Date(<%= event.end_at.year %>, <%= event.end_at.month-1 %>, <%= event.end_at.day %>, <%= event.end_at.hour %>, <%= event.end_at.min %>, <%= event.end_at.sec %>),
					<% else %>
						end: new Date(<%= 5.hours.ago.year %>, <%= 5.hours.ago.month-1 %>, <%= 5.hours.ago.day %>, <%= 5.hours.ago.hour %>, <%= 5.hours.ago.min %>, <%= 5.hours.ago.sec %>),
					<% end %>
					allDay: false
				}<%= "," if event != Schedule.last %>
				<% end %>
				]
    })
});
</script>
